class{
  constructor(elem=document){
    this.keys=[];
    this.elem=elem;
    this.keycodes={"0":{"id":0,"key":["",""],"code":""},"1":{"id":1,"key":["unidentified",""],"code":""},"2":{"id":2,"key":["",""],"code":""},"3":{"id":3,"key":["cancel",""],"code":"pause"},"4":{"id":4,"key":["",""],"code":""},"5":{"id":5,"key":["",""],"code":""},"6":{"id":6,"key":["",""],"code":""},"7":{"id":7,"key":["",""],"code":""},"8":{"id":8,"key":["backspace",""],"code":"backspace"},"9":{"id":9,"key":["tab",""],"code":"tab"},"10":{"id":10,"key":["",""],"code":""},"11":{"id":11,"key":["",""],"code":""},"12":{"id":12,"key":["clear",""],"code":"numlock"},"13":{"id":13,"key":["enter",""],"code":"enter"},"14":{"id":14,"key":["",""],"code":""},"15":{"id":15,"key":["",""],"code":""},"16":{"id":16,"key":["shift",""],"code":"shiftleft"},"17":{"id":17,"key":["control",""],"code":"controlleft"},"18":{"id":18,"key":["alt",""],"code":"altleft"},"19":{"id":19,"key":["pause",""],"code":"pause"},"20":{"id":20,"key":["capslock",""],"code":"capslock"},"21":{"id":21,"key":["unidentified",""],"code":"lang1"},"22":{"id":22,"key":["",""],"code":""},"23":{"id":23,"key":["",""],"code":""},"24":{"id":24,"key":["",""],"code":""},"25":{"id":25,"key":["unidentified",""],"code":"lang2"},"26":{"id":26,"key":["",""],"code":""},"27":{"id":27,"key":["escape",""],"code":"escape"},"28":{"id":28,"key":["",""],"code":""},"29":{"id":29,"key":["",""],"code":""},"30":{"id":30,"key":["",""],"code":""},"31":{"id":31,"key":["",""],"code":""},"32":{"id":32,"key":[" ",""],"code":"space"},"33":{"id":33,"key":["pageup",""],"code":"numpad9"},"34":{"id":34,"key":["pagedown",""],"code":"numpad3"},"35":{"id":35,"key":["end",""],"code":"numpad1"},"36":{"id":36,"key":["home",""],"code":"numpad7"},"37":{"id":37,"key":["arrowleft",""],"code":"arrowleft"},"38":{"id":38,"key":["arrowup",""],"code":"arrowup"},"39":{"id":39,"key":["arrowright",""],"code":"arrowright"},"40":{"id":40,"key":["arrowdown",""],"code":"arrowdown"},"41":{"id":41,"key":["",""],"code":""},"42":{"id":42,"key":["",""],"code":""},"43":{"id":43,"key":["",""],"code":""},"44":{"id":44,"key":["f13",""],"code":"f13"},"45":{"id":45,"key":["insert",""],"code":"numpad0"},"46":{"id":46,"key":["delete",""],"code":"numpaddecimal"},"47":{"id":47,"key":["",""],"code":""},"48":{"id":48,"key":["0",""],"code":"digit0"},"49":{"id":49,"key":["1",""],"code":"digit1"},"50":{"id":50,"key":["2",""],"code":"digit2"},"51":{"id":51,"key":["3",""],"code":"digit3"},"52":{"id":52,"key":["4",""],"code":"digit4"},"53":{"id":53,"key":["5",""],"code":"digit5"},"54":{"id":54,"key":["6",""],"code":"digit6"},"55":{"id":55,"key":["7",""],"code":"digit7"},"56":{"id":56,"key":["8",""],"code":"digit8"},"57":{"id":57,"key":["9",""],"code":"digit9"},"58":{"id":58,"key":[":",""],"code":"period"},"59":{"id":59,"key":[";",""],"code":"semicolon"},"60":{"id":60,"key":["<",""],"code":"backquote"},"61":{"id":61,"key":["=",""],"code":"equal"},"62":{"id":62,"key":["",""],"code":""},"63":{"id":63,"key":["\u03b2",""],"code":"minus"},"64":{"id":64,"key":["",""],"code":""},"65":{"id":65,"key":["a",""],"code":"keya"},"66":{"id":66,"key":["b",""],"code":"keyb"},"67":{"id":67,"key":["c",""],"code":"keyc"},"68":{"id":68,"key":["d",""],"code":"keyd"},"69":{"id":69,"key":["e",""],"code":"keye"},"70":{"id":70,"key":["f",""],"code":"keyf"},"71":{"id":71,"key":["g",""],"code":"keyg"},"72":{"id":72,"key":["h",""],"code":"keyh"},"73":{"id":73,"key":["i",""],"code":"keyi"},"74":{"id":74,"key":["j",""],"code":"keyj"},"75":{"id":75,"key":["k",""],"code":"keyk"},"76":{"id":76,"key":["l",""],"code":"keyl"},"77":{"id":77,"key":["m",""],"code":"keym"},"78":{"id":78,"key":["n",""],"code":"keyn"},"79":{"id":79,"key":["o",""],"code":"keyo"},"80":{"id":80,"key":["p",""],"code":"keyp"},"81":{"id":81,"key":["q",""],"code":"keyq"},"82":{"id":82,"key":["r",""],"code":"keyr"},"83":{"id":83,"key":["s",""],"code":"keys"},"84":{"id":84,"key":["t",""],"code":"keyt"},"85":{"id":85,"key":["u",""],"code":"keyu"},"86":{"id":86,"key":["v",""],"code":"keyv"},"87":{"id":87,"key":["w",""],"code":"keyw"},"88":{"id":88,"key":["x",""],"code":"keyx"},"89":{"id":89,"key":["y",""],"code":"keyy"},"90":{"id":90,"key":["z",""],"code":"keyz"},"91":{"id":91,"key":["meta",""],"code":"metaleft"},"92":{"id":92,"key":["meta",""],"code":"metaright"},"93":{"id":93,"key":["contextmenu",""],"code":"contextmenu"},"94":{"id":94,"key":["",""],"code":""},"95":{"id":95,"key":["",""],"code":""},"96":{"id":96,"key":["0",""],"code":"numpad0"},"97":{"id":97,"key":["1",""],"code":"numpad1"},"98":{"id":98,"key":["2",""],"code":"numpad2"},"99":{"id":99,"key":["3",""],"code":"numpad3"},"100":{"id":100,"key":["4",""],"code":"numpad4"},"101":{"id":101,"key":["5",""],"code":"numpad5"},"102":{"id":102,"key":["6",""],"code":"numpad6"},"103":{"id":103,"key":["7",""],"code":"numpad7"},"104":{"id":104,"key":["8",""],"code":"numpad8"},"105":{"id":105,"key":["9",""],"code":"numpad9"},"106":{"id":106,"key":["*",""],"code":"numpadmultiply"},"107":{"id":107,"key":["+",""],"code":"numpadadd"},"108":{"id":108,"key":[",",""],"code":"numpaddecimal"},"109":{"id":109,"key":["-",""],"code":"numpadsubtract"},"110":{"id":110,"key":[".",""],"code":"numpaddecimal"},"111":{"id":111,"key":["/",""],"code":"numpaddivide"},"112":{"id":112,"key":["f1",""],"code":"f1"},"113":{"id":113,"key":["f2",""],"code":"f2"},"114":{"id":114,"key":["f3",""],"code":"f3"},"115":{"id":115,"key":["f4",""],"code":"f4"},"116":{"id":116,"key":["f5",""],"code":"f5"},"117":{"id":117,"key":["f6",""],"code":"f6"},"118":{"id":118,"key":["f7",""],"code":"f7"},"119":{"id":119,"key":["f8",""],"code":"f8"},"120":{"id":120,"key":["f9",""],"code":"f9"},"121":{"id":121,"key":["f10",""],"code":"f10"},"122":{"id":122,"key":["f11",""],"code":"f11"},"123":{"id":123,"key":["f12",""],"code":"f12"},"124":{"id":124,"key":["f13",""],"code":"f13"},"125":{"id":125,"key":["f14",""],"code":"f14"},"126":{"id":126,"key":["f15",""],"code":"f15"},"127":{"id":127,"key":["f16",""],"code":"f16"},"128":{"id":128,"key":["f17",""],"code":"f17"},"129":{"id":129,"key":["f18",""],"code":"f18"},"130":{"id":130,"key":["f19",""],"code":"f19"},"131":{"id":131,"key":["f20",""],"code":"f20"},"132":{"id":132,"key":["f21",""],"code":"f21"},"133":{"id":133,"key":["f22",""],"code":"f22"},"134":{"id":134,"key":["f23",""],"code":"f23"},"135":{"id":135,"key":["f24",""],"code":"f24"},"136":{"id":136,"key":["f25",""],"code":"f25"},"137":{"id":137,"key":["f26",""],"code":"f26"},"138":{"id":138,"key":["f27",""],"code":"f27"},"139":{"id":139,"key":["f28",""],"code":"f28"},"140":{"id":140,"key":["f29",""],"code":"f29"},"141":{"id":141,"key":["f30",""],"code":"f30"},"142":{"id":142,"key":["f31",""],"code":"f31"},"143":{"id":143,"key":["f32",""],"code":"f32"},"144":{"id":144,"key":["numlock",""],"code":"numlock"},"145":{"id":145,"key":["scrolllock",""],"code":"scrolllock"},"146":{"id":146,"key":["",""],"code":""},"147":{"id":147,"key":["",""],"code":""},"148":{"id":148,"key":["",""],"code":""},"149":{"id":149,"key":["",""],"code":""},"150":{"id":150,"key":["",""],"code":""},"151":{"id":151,"key":["",""],"code":""},"152":{"id":152,"key":["",""],"code":""},"153":{"id":153,"key":["",""],"code":""},"154":{"id":154,"key":["",""],"code":""},"155":{"id":155,"key":["",""],"code":""},"156":{"id":156,"key":["",""],"code":""},"157":{"id":157,"key":["",""],"code":""},"158":{"id":158,"key":["",""],"code":""},"159":{"id":159,"key":["",""],"code":""},"160":{"id":160,"key":["[",""],"code":"blacketleft"},"161":{"id":161,"key":["dead",""],"code":"blacketright"},"162":{"id":162,"key":["",""],"code":""},"163":{"id":163,"key":["\\",""],"code":"backquote"},"164":{"id":164,"key":["$",""],"code":"backslash"},"165":{"id":165,"key":["^\u00f9",""],"code":"quote"},"166":{"id":166,"key":["",""],"code":""},"167":{"id":167,"key":["",""],"code":""},"168":{"id":168,"key":["",""],"code":""},"169":{"id":169,"key":[")",""],"code":"minus"},"170":{"id":170,"key":["*",""],"code":"backslash"},"171":{"id":171,"key":["+",""],"code":"bracketright"},"172":{"id":172,"key":["",""],"code":""},"173":{"id":173,"key":["-",""],"code":"minus"},"174":{"id":174,"key":["audiovolumedown",""],"code":""},"175":{"id":175,"key":["audiovolumeup",""],"code":""},"176":{"id":176,"key":["mediatracknext",""],"code":"mediatracknext"},"177":{"id":177,"key":["mediatrackprevious",""],"code":"mediatrackprevious"},"178":{"id":178,"key":["",""],"code":""},"179":{"id":179,"key":["mediaplaypause",""],"code":""},"180":{"id":180,"key":["launchmail",""],"code":""},"181":{"id":181,"key":["audiovolumemute",""],"code":"volumemute"},"182":{"id":182,"key":["audiovolumedown",""],"code":"volumedown"},"183":{"id":183,"key":["audiovolumeup",""],"code":"volumeup"},"184":{"id":184,"key":["",""],"code":""},"185":{"id":185,"key":["",""],"code":""},"186":{"id":186,"key":[";",""],"code":"semicolon"},"187":{"id":187,"key":["+",""],"code":"equal"},"188":{"id":188,"key":[",",""],"code":"comma"},"189":{"id":189,"key":["-",""],"code":"minus"},"190":{"id":190,"key":[".",""],"code":"period"},"191":{"id":191,"key":["/","?"],"code":"slash"},"192":{"id":192,"key":["`",""],"code":"backquote"},"193":{"id":193,"key":["/",""],"code":"intlro"},"194":{"id":194,"key":[".",""],"code":"numpadcomma"},"195":{"id":195,"key":["",""],"code":""},"196":{"id":196,"key":["",""],"code":""},"197":{"id":197,"key":["",""],"code":""},"198":{"id":198,"key":["",""],"code":""},"199":{"id":199,"key":["",""],"code":""},"200":{"id":200,"key":["",""],"code":""},"201":{"id":201,"key":["",""],"code":""},"202":{"id":202,"key":["",""],"code":""},"203":{"id":203,"key":["",""],"code":""},"204":{"id":204,"key":["",""],"code":""},"205":{"id":205,"key":["",""],"code":""},"206":{"id":206,"key":["",""],"code":""},"207":{"id":207,"key":["",""],"code":""},"208":{"id":208,"key":["",""],"code":""},"209":{"id":209,"key":["",""],"code":""},"210":{"id":210,"key":["",""],"code":""},"211":{"id":211,"key":["",""],"code":""},"212":{"id":212,"key":["",""],"code":""},"213":{"id":213,"key":["",""],"code":""},"214":{"id":214,"key":["",""],"code":""},"215":{"id":215,"key":["",""],"code":""},"216":{"id":216,"key":["",""],"code":""},"217":{"id":217,"key":["",""],"code":""},"218":{"id":218,"key":["",""],"code":""},"219":{"id":219,"key":["[",""],"code":"blacketleft"},"220":{"id":220,"key":["\\",""],"code":"backslash"},"221":{"id":221,"key":["]",""],"code":"bracketright"},"222":{"id":222,"key":["'",""],"code":"quote"},"223":{"id":223,"key":["`",""],"code":"backquote"},"224":{"id":224,"key":["meta",""],"code":"osleft"},"225":{"id":225,"key":["altgraph",""],"code":"altright"},"226":{"id":226,"key":["\\",""],"code":"intlbackslash"},"227":{"id":227,"key":["",""],"code":""},"228":{"id":228,"key":["",""],"code":""},"229":{"id":229,"key":["",""],"code":""},"230":{"id":230,"key":["",""],"code":""},"231":{"id":231,"key":["",""],"code":""},"232":{"id":232,"key":["",""],"code":""},"233":{"id":233,"key":["",""],"code":""},"234":{"id":234,"key":["",""],"code":""},"235":{"id":235,"key":["",""],"code":""},"236":{"id":236,"key":["",""],"code":""},"237":{"id":237,"key":["",""],"code":""},"238":{"id":238,"key":["",""],"code":""},"239":{"id":239,"key":["",""],"code":""},"240":{"id":240,"key":["",""],"code":""},"241":{"id":241,"key":["",""],"code":""},"242":{"id":242,"key":["",""],"code":""},"243":{"id":243,"key":["",""],"code":""},"244":{"id":244,"key":["",""],"code":""},"245":{"id":245,"key":["",""],"code":""},"246":{"id":246,"key":["",""],"code":""},"247":{"id":247,"key":["",""],"code":""},"248":{"id":248,"key":["",""],"code":""},"249":{"id":249,"key":["",""],"code":""},"250":{"id":250,"key":["",""],"code":""},"251":{"id":251,"key":["",""],"code":""},"252":{"id":252,"key":["",""],"code":""},"253":{"id":253,"key":["",""],"code":""},"254":{"id":254,"key":["",""],"code":""},"255":{"id":255,"key":["unidentified",""],"code":"wakeup"}};
    elem.addEventListener("keydown",e=>{
      this.addkey(e.keyCode);
    });
    elem.addEventListener("keyup",e=>{
      const index=this.keys.indexOf(e.keyCode);
      if(index!==-1){
        this.keys.splice(index,1);
      }
    });
  }
  addkey(key){
    if(!this.keys.includes(key)){
      this.keys.push(key);
    }
  }
  delkey(key){
    const index=this.keys.indexOf(key);
    if(index!==-1){
      this.keys.splice(index,1);
    }
  }
  metaKey(e){
    if(e.shiftKey===true){
      this.addkey("shift");
    }else{
      this.delkey("shift");
    }
  }
  get allKeys(){
    let keys=[];
    for(let key of this.keys){
      const onekey=this.keycodes[key];
      keys.push(onekey.code);
      keys.push(onekey.id);
      keys=keys.concat(onekey.key);
    }
    return keys;
  }
  isDown(key){
    return this.allKeys.includes(key);
  }
}
function scaleToWindow(canvas,backgroundColor){var scaleX,scaleY,scale,center;scaleX=window.innerWidth/canvas.offsetWidth;scaleY=window.innerHeight/canvas.offsetHeight;scale=Math.min(scaleX,scaleY);canvas.style.transformOrigin="0 0";canvas.style.transform="scale("+scale+")";if(canvas.offsetWidth>canvas.offsetHeight){if(canvas.offsetWidth*scale<window.innerWidth){center="horizontally";}else{center="vertically";}}else{if(canvas.offsetHeight*scale<window.innerHeight){center="vertically";}else{center="horizontally";}};var margin;if(center==="horizontally"){margin=(window.innerWidth-canvas.offsetWidth*scale)/2;canvas.style.marginTop=0+"px";canvas.style.marginBottom=0+"px";canvas.style.marginLeft=margin+"px";canvas.style.marginRight=margin+"px";};if(center==="vertically"){margin=(window.innerHeight-canvas.offsetHeight*scale)/2;canvas.style.marginTop=margin+"px";canvas.style.marginBottom=margin+"px";canvas.style.marginLeft=0+"px";canvas.style.marginRight=0+"px";};canvas.style.paddingLeft=0+"px";canvas.style.paddingRight=0+"px";canvas.style.paddingTop=0+"px";canvas.style.paddingBottom=0+"px";canvas.style.display="block";document.body.style.backgroundColor=backgroundColor;var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("safari")!=-1){if(ua.indexOf("chrome")>-1){}else{}};return scale;};var PIXI=function(t){"use strict";var e=setTimeout;function r(t){return Boolean(t&&void 0!==t.length)}function i(){}function n(t){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,n._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var i;try{i=r(t._value)}catch(t){return void a(e.promise,t)}s(e.promise,i)}else(1===t._state?s:a)(e.promise,t._value)}))):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if(e instanceof n)return t._state=3,t._value=e,void h(t);if("function"==typeof r)return void l((i=r,o=e,function(){i.apply(o,arguments)}),t)}t._state=1,t._value=e,h(t)}catch(e){a(t,e)}var i,o}function a(t,e){t._state=2,t._value=e,h(t)}function h(t){2===t._state&&0===t._deferreds.length&&n._immediateFn((function(){t._handled||n._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)o(t,t._deferreds[e]);t._deferreds=null}function u(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function l(t,e){var r=!1;try{t((function(t){r||(r=!0,s(e,t))}),(function(t){r||(r=!0,a(e,t))}))}catch(t){if(r)return;r=!0,a(e,t)}}n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var r=new this.constructor(i);return o(this,new u(t,e,r)),r},n.prototype.finally=function(t){var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))},n.all=function(t){return new n((function(e,i){if(!r(t))return i(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var o=n.length;function s(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,(function(e){s(t,e)}),i)}n[t]=r,0==--o&&e(n)}catch(t){i(t)}}for(var a=0;a<n.length;a++)s(a,n[a])}))},n.allSettled=function(t){return new this((function(e,r){if(!t||void 0===t.length)return r(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var n=i.length;function o(t,r){if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,(function(e){o(t,e)}),(function(r){i[t]={status:"rejected",reason:r},0==--n&&e(i)}))}i[t]={status:"fulfilled",value:r},0==--n&&e(i)}for(var s=0;s<i.length;s++)o(s,i[s])}))},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n((function(e){e(t)}))},n.reject=function(t){return new n((function(e,r){r(t)}))},n.race=function(t){return new n((function(e,i){if(!r(t))return i(new TypeError("Promise.race accepts an array"));for(var o=0,s=t.length;o<s;o++)n.resolve(t[o]).then(e,i)}))},n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){e(t,0)},n._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;function p(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var _=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==i.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,i,n=arguments,o=p(t),s=1;s<arguments.length;s++){for(var a in r=Object(n[s]))d.call(r,a)&&(o[a]=r[a]);if(c){i=c(r);for(var h=0;h<i.length;h++)f.call(r,i[h])&&(o[i[h]]=r[i[h]])}}return o};if("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:"undefined"!=typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=n),Object.assign||(Object.assign=_),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var v=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-v}}for(var m=Date.now(),y=["ms","moz","webkit","o"],g=0;g<y.length&&!globalThis.requestAnimationFrame;++g){var T=y[g];globalThis.requestAnimationFrame=globalThis[T+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[T+"CancelAnimationFrame"]||globalThis[T+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+m-e;return r<0&&(r=0),m=e,globalThis.self.setTimeout((function(){m=Date.now(),t(performance.now())}),r)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array),t.ENV=void 0,t.RENDERER_TYPE=void 0,t.BUFFER_BITS=void 0,t.BLEND_MODES=void 0,t.DRAW_MODES=void 0,t.FORMATS=void 0,t.TARGETS=void 0,t.TYPES=void 0,t.SAMPLER_TYPES=void 0,t.SCALE_MODES=void 0,t.WRAP_MODES=void 0,t.MIPMAP_MODES=void 0,t.ALPHA_MODES=void 0,t.CLEAR_MODES=void 0,t.GC_MODES=void 0,t.PRECISION=void 0,t.MASK_TYPES=void 0,t.COLOR_MASK_BITS=void 0,t.MSAA_QUALITY=void 0,t.BUFFER_TYPE=void 0,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(t.ENV||(t.ENV={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(t.RENDERER_TYPE||(t.RENDERER_TYPE={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(t.BUFFER_BITS||(t.BUFFER_BITS={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(t.BLEND_MODES||(t.BLEND_MODES={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(t.DRAW_MODES||(t.DRAW_MODES={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(t.FORMATS||(t.FORMATS={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(t.TARGETS||(t.TARGETS={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(t.TYPES||(t.TYPES={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(t.SAMPLER_TYPES||(t.SAMPLER_TYPES={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(t.SCALE_MODES||(t.SCALE_MODES={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(t.WRAP_MODES||(t.WRAP_MODES={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(t.MIPMAP_MODES||(t.MIPMAP_MODES={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(t.ALPHA_MODES||(t.ALPHA_MODES={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(t.CLEAR_MODES||(t.CLEAR_MODES={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(t.GC_MODES||(t.GC_MODES={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(t.PRECISION||(t.PRECISION={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(t.MASK_TYPES||(t.MASK_TYPES={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(t.COLOR_MASK_BITS||(t.COLOR_MASK_BITS={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(t.MSAA_QUALITY||(t.MSAA_QUALITY={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(t.BUFFER_TYPE||(t.BUFFER_TYPE={}));var E={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},b=/iPhone/i,x=/iPod/i,A=/iPad/i,S=/\biOS-universal(?:.+)Mac\b/i,R=/\bAndroid(?:.+)Mobile\b/i,O=/Android/i,M=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,P=/Silk/i,I=/Windows Phone/i,D=/\bWindows(?:.+)ARM\b/i,w=/BlackBerry/i,C=/BB10/i,N=/Opera Mini/i,F=/\b(CriOS|Chrome)(?:.+)Mobile/i,L=/Mobile(?:.+)Firefox\b/i,B=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},G=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,i=r.split("[FBAN");void 0!==i[1]&&(r=i[0]),void 0!==(i=r.split("Twitter"))[1]&&(r=i[0]);var n=function(t){return function(e){return e.test(t)}}(r),o={apple:{phone:n(b)&&!n(I),ipod:n(x),tablet:!n(b)&&(n(A)||B(e))&&!n(I),universal:n(S),device:(n(b)||n(x)||n(A)||n(S)||B(e))&&!n(I)},amazon:{phone:n(M),tablet:!n(M)&&n(P),device:n(M)||n(P)},android:{phone:!n(I)&&n(M)||!n(I)&&n(R),tablet:!n(I)&&!n(M)&&!n(R)&&(n(P)||n(O)),device:!n(I)&&(n(M)||n(P)||n(R)||n(O))||n(/\bokhttp\b/i)},windows:{phone:n(I),tablet:n(D),device:n(I)||n(D)},other:{blackberry:n(w),blackberry10:n(C),opera:n(N),firefox:n(L),chrome:n(F),device:n(w)||n(C)||n(N)||n(L)||n(F)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator),U={ADAPTER:E,MIPMAP_TEXTURES:t.MIPMAP_MODES.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:t.MSAA_QUALITY.NONE,SPRITE_MAX_TEXTURES:function(t){var e,r=!0;(G.tablet||G.phone)&&(G.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(r=!1),G.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(r=!1));return r?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:t.GC_MODES.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:t.WRAP_MODES.CLAMP,SCALE_MODE:t.SCALE_MODES.LINEAR,PRECISION_VERTEX:t.PRECISION.HIGH,PRECISION_FRAGMENT:G.apple.device?t.PRECISION.HIGH:t.PRECISION.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!G.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function X(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var j=X((function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new n(i,o||t,s),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,s=new Array(o);n<o;n++)s[n]=i[n].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,n,o,s){var a=arguments,h=r?r+t:t;if(!this._events[h])return!1;var u,l,c=this._events[h],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,o),!0;case 6:return c.fn.call(c.context,e,i,n,o,s),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=a[l];c.fn.apply(c.context,u)}else{var f,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,n);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=a[f];c[l].fn.apply(c[l].context,u)}}return!0},a.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,i,n){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||s(this,o);else{for(var h=0,u=[],l=a.length;h<l;h++)(a[h].fn!==e||n&&!a[h].once||i&&a[h].context!==i)&&u.push(a[h]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})),H=V,Y=V;function V(t,e,r){r=r||2;var i,n,o,s,a,h,u,l=e&&e.length,c=l?e[0]*r:t.length,d=z(t,0,c,r,!0),f=[];if(!d||d.next===d.prev)return f;if(l&&(d=function(t,e,r,i){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=z(t,e[n]*i,n<o-1?e[n+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),a.push(it(s));for(a.sort($),n=0;n<a.length;n++)r=tt(a[n],r);return r}(t,e,d,r)),t.length>80*r){i=o=t[0],n=s=t[1];for(var p=r;p<c;p+=r)(a=t[p])<i&&(i=a),(h=t[p+1])<n&&(n=h),a>o&&(o=a),h>s&&(s=h);u=0!==(u=Math.max(o-i,s-n))?32767/u:0}return q(d,f,r,i,n,u,0),f}function z(t,e,r,i,n){var o,s;if(n===vt(t,e,r,i)>0)for(o=e;o<r;o+=i)s=ft(o,t[o],t[o+1],s);else for(o=r-i;o>=e;o-=i)s=ft(o,t[o],t[o+1],s);return s&&at(s,s.next)&&(pt(s),s=s.next),s}function W(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!at(i,i.next)&&0!==st(i.prev,i,i.next))i=i.next;else{if(pt(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function q(t,e,r,i,n,o,s){if(t){!s&&o&&function(t,e,r,i){var n=t;do{0===n.z&&(n.z=rt(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,s,a,h,u=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,i=r,a=0,e=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;a>0||h>0&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,u*=2}while(s>1)}(n)}(t,i,n,o);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,o?Z(t,i,n,o):K(t))e.push(a.i/r|0),e.push(t.i/r|0),e.push(h.i/r|0),pt(t),t=h.next,u=h.next;else if((t=h)===u){s?1===s?q(t=Q(W(t),e,r),e,r,i,n,o,2):2===s&&J(t,e,r,i,n,o):q(W(t),e,r,i,n,o,1);break}}}function K(t){var e=t.prev,r=t,i=t.next;if(st(e,r,i)>=0)return!1;for(var n=e.x,o=r.x,s=i.x,a=e.y,h=r.y,u=i.y,l=n<o?n<s?n:s:o<s?o:s,c=a<h?a<u?a:u:h<u?h:u,d=n>o?n>s?n:s:o>s?o:s,f=a>h?a>u?a:u:h>u?h:u,p=i.next;p!==e;){if(p.x>=l&&p.x<=d&&p.y>=c&&p.y<=f&&nt(n,a,o,h,s,u,p.x,p.y)&&st(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Z(t,e,r,i){var n=t.prev,o=t,s=t.next;if(st(n,o,s)>=0)return!1;for(var a=n.x,h=o.x,u=s.x,l=n.y,c=o.y,d=s.y,f=a<h?a<u?a:u:h<u?h:u,p=l<c?l<d?l:d:c<d?c:d,_=a>h?a>u?a:u:h>u?h:u,v=l>c?l>d?l:d:c>d?c:d,m=rt(f,p,e,r,i),y=rt(_,v,e,r,i),g=t.prevZ,T=t.nextZ;g&&g.z>=m&&T&&T.z<=y;){if(g.x>=f&&g.x<=_&&g.y>=p&&g.y<=v&&g!==n&&g!==s&&nt(a,l,h,c,u,d,g.x,g.y)&&st(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,T.x>=f&&T.x<=_&&T.y>=p&&T.y<=v&&T!==n&&T!==s&&nt(a,l,h,c,u,d,T.x,T.y)&&st(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;g&&g.z>=m;){if(g.x>=f&&g.x<=_&&g.y>=p&&g.y<=v&&g!==n&&g!==s&&nt(a,l,h,c,u,d,g.x,g.y)&&st(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;T&&T.z<=y;){if(T.x>=f&&T.x<=_&&T.y>=p&&T.y<=v&&T!==n&&T!==s&&nt(a,l,h,c,u,d,T.x,T.y)&&st(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Q(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!at(n,o)&&ht(n,i,i.next,o)&&ct(n,o)&&ct(o,n)&&(e.push(n.i/r|0),e.push(i.i/r|0),e.push(o.i/r|0),pt(i),pt(i.next),i=t=o),i=i.next}while(i!==t);return W(i)}function J(t,e,r,i,n,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&ot(s,a)){var h=dt(s,a);return s=W(s,s.next),h=W(h,h.next),q(s,e,r,i,n,o,0),void q(h,e,r,i,n,o,0)}a=a.next}s=s.next}while(s!==t)}function $(t,e){return t.x-e.x}function tt(t,e){var r=function(t,e){var r,i=e,n=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>s&&(s=a,r=i.x<i.next.x?i:i.next,a===n))return r}i=i.next}while(i!==e);if(!r)return null;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;do{n>=i.x&&i.x>=l&&n!==i.x&&nt(o<c?n:s,o,l,c,o<c?s:n,o,i.x,i.y)&&(h=Math.abs(o-i.y)/(n-i.x),ct(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&et(r,i)))&&(r=i,d=h)),i=i.next}while(i!==u);return r}(t,e);if(!r)return e;var i=dt(r,t);return W(i,i.next),W(r,r.next)}function et(t,e){return st(t.prev,t,e.prev)<0&&st(e.next,t,t.next)<0}function rt(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function it(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function nt(t,e,r,i,n,o,s,a){return(n-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(r-s)*(e-a)&&(r-s)*(o-a)>=(n-s)*(i-a)}function ot(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&ht(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(ct(t,e)&&ct(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(st(t.prev,t,e.prev)||st(t,e.prev,e))||at(t,e)&&st(t.prev,t,t.next)>0&&st(e.prev,e,e.next)>0)}function st(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function at(t,e){return t.x===e.x&&t.y===e.y}function ht(t,e,r,i){var n=lt(st(t,e,r)),o=lt(st(t,e,i)),s=lt(st(r,i,t)),a=lt(st(r,i,e));return n!==o&&s!==a||(!(0!==n||!ut(t,r,e))||(!(0!==o||!ut(t,i,e))||(!(0!==s||!ut(r,t,i))||!(0!==a||!ut(r,e,i)))))}function ut(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function lt(t){return t>0?1:t<0?-1:0}function ct(t,e){return st(t.prev,t,t.next)<0?st(t,e,t.next)>=0&&st(t,t.prev,e)>=0:st(t,e,t.prev)<0||st(t,t.next,e)<0}function dt(t,e){var r=new _t(t.i,t.x,t.y),i=new _t(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function ft(t,e,r,i){var n=new _t(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function pt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function _t(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vt(t,e,r,i){for(var n=0,o=e,s=r-i;o<r;o+=i)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}V.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,s=Math.abs(vt(t,0,o,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;s-=Math.abs(vt(t,u,l,r))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},V.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[n][o][s]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r},H.default=Y;var mt=X((function(t,e){!function(r){var i=e&&!e.nodeType&&e,n=t&&!t.nodeType&&t,o="object"==typeof k&&k;o.global!==o&&o.window!==o&&o.self!==o||(r=o);var s,a,h=2147483647,u=36,l=/^xn--/,c=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,_=String.fromCharCode;function v(t){throw RangeError(f[t])}function m(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function y(t,e){var r=t.split("@"),i="";return r.length>1&&(i=r[0]+"@",t=r[1]),i+m((t=t.replace(d,".")).split("."),e).join(".")}function g(t){for(var e,r,i=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function T(t){return m(t,(function(t){var e="";return t>65535&&(e+=_((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=_(t)})).join("")}function E(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function b(t,e,r){var i=0;for(t=r?p(t/700):t>>1,t+=p(t/e);t>455;i+=u)t=p(t/35);return p(i+36*t/(t+38))}function x(t){var e,r,i,n,o,s,a,l,c,d,f,_=[],m=t.length,y=0,g=128,E=72;for((r=t.lastIndexOf("-"))<0&&(r=0),i=0;i<r;++i)t.charCodeAt(i)>=128&&v("not-basic"),_.push(t.charCodeAt(i));for(n=r>0?r+1:0;n<m;){for(o=y,s=1,a=u;n>=m&&v("invalid-input"),((l=(f=t.charCodeAt(n++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:u)>=u||l>p((h-y)/s))&&v("overflow"),y+=l*s,!(l<(c=a<=E?1:a>=E+26?26:a-E));a+=u)s>p(h/(d=u-c))&&v("overflow"),s*=d;E=b(y-o,e=_.length+1,0==o),p(y/e)>h-g&&v("overflow"),g+=p(y/e),y%=e,_.splice(y++,0,g)}return T(_)}function A(t){var e,r,i,n,o,s,a,l,c,d,f,m,y,T,x,A=[];for(m=(t=g(t)).length,e=128,r=0,o=72,s=0;s<m;++s)(f=t[s])<128&&A.push(_(f));for(i=n=A.length,n&&A.push("-");i<m;){for(a=h,s=0;s<m;++s)(f=t[s])>=e&&f<a&&(a=f);for(a-e>p((h-r)/(y=i+1))&&v("overflow"),r+=(a-e)*y,e=a,s=0;s<m;++s)if((f=t[s])<e&&++r>h&&v("overflow"),f==e){for(l=r,c=u;!(l<(d=c<=o?1:c>=o+26?26:c-o));c+=u)x=l-d,T=u-d,A.push(_(E(d+x%T,0))),l=p(x/T);A.push(_(E(l,0))),o=b(r,y,i==n),r=0,++i}++r,++e}return A.join("")}if(s={version:"1.3.2",ucs2:{decode:g,encode:T},decode:x,encode:A,toASCII:function(t){return y(t,(function(t){return c.test(t)?"xn--"+A(t):t}))},toUnicode:function(t){return y(t,(function(t){return l.test(t)?x(t.slice(4).toLowerCase()):t}))}},i&&n)if(t.exports==i)n.exports=s;else for(a in s)s.hasOwnProperty(a)&&(i[a]=s[a]);else r.punycode=s}(k)})),yt=function(t){return"string"==typeof t},gt=function(t){return"object"==typeof t&&null!==t},Tt=function(t){return null===t},Et=function(t){return null==t};function bt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var xt=function(t,e,r,i){e=e||"&",r=r||"=";var n={};if("string"!=typeof t||0===t.length)return n;var o=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var h=0;h<a;++h){var u,l,c,d,f=t[h].replace(o,"%20"),p=f.indexOf(r);p>=0?(u=f.substr(0,p),l=f.substr(p+1)):(u=f,l=""),c=decodeURIComponent(u),d=decodeURIComponent(l),bt(n,c)?Array.isArray(n[c])?n[c].push(d):n[c]=[n[c],d]:n[c]=d}return n},At=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},St=function(t,e,r,i){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var n=encodeURIComponent(At(i))+r;return Array.isArray(t[i])?t[i].map((function(t){return n+encodeURIComponent(At(t))})).join(e):n+encodeURIComponent(At(t[i]))})).join(e):i?encodeURIComponent(At(i))+r+encodeURIComponent(At(t)):""},Rt=X((function(t,e){e.decode=e.parse=xt,e.encode=e.stringify=St})),Ot=Ht,Mt=function(t,e){return Ht(t,!1,!0).resolve(e)},Pt=function(t){yt(t)&&(t=Ht(t));if(!(t instanceof It))return It.prototype.format.call(t);return t.format()};function It(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Dt=/^([a-z0-9.+-]+:)/i,wt=/:[0-9]*$/,Ct=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Nt=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Ft=["'"].concat(Nt),Lt=["%","/","?",";","#"].concat(Ft),Bt=["/","?","#"],Gt=/^[+a-z0-9A-Z_-]{0,63}$/,Ut=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kt={javascript:!0,"javascript:":!0},Xt={javascript:!0,"javascript:":!0},jt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Ht(t,e,r){if(t&&gt(t)&&t instanceof It)return t;var i=new It;return i.parse(t,e,r),i}It.prototype.parse=function(t,e,r){if(!yt(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),n=-1!==i&&i<t.indexOf("#")?"?":"#",o=t.split(n);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(n);if(s=s.trim(),!r&&1===t.split("#").length){var a=Ct.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?Rt.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=Dt.exec(s);if(h){var u=(h=h[0]).toLowerCase();this.protocol=u,s=s.substr(h.length)}if(r||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l=";this.PIXI=this.PIXI||{},function(t,a){"use strict";var r=function(t,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r])},r(t,a)};var o=function(t){function o(r,o,n,i,e,h){void 0===h&&(h=0);e=e||i/2;for(var s=-1*Math.PI/2+h,c=2*n,u=a.PI_2/c,l=[],M=0;M<c;M++){var P=M%2?e:i,f=M*u+s;l.push(r+P*Math.cos(f),o+P*Math.sin(f))}return t.call(this,l)||this}return function(t,a){function o(){this.constructor=t}r(t,a),t.prototype=null===a?Object.create(a):(o.prototype=a.prototype,new o)}(o,t),o}(a.Polygon);Object.defineProperties(t.Graphics.prototype,{drawTorus:{value:function(t,a,r,o,n,i){return void 0===n&&(n=0),void 0===i&&(i=2*Math.PI),Math.abs(i-n)>=2*Math.PI?this.drawCircle(t,a,o).beginHole().drawCircle(t,a,r).endHole():(this.finishPoly(),this.arc(t,a,r,i,n,!0).arc(t,a,o,n,i,!1).finishPoly(),this)}},drawChamferRect:{value:function(t,a,r,o,n){if(n<=0)return this.drawRect(t,a,r,o);for(var i=Math.min(n,Math.min(r,o)/2),e=t+r,h=a+o,s=[t+i,a,e-i,a,e,a+i,e,h-i,e-i,h,t+i,h,t,h-i,t,a+i],c=s.length-1;c>=2;c-=2)s[c]===s[c-2]&&s[c-1]===s[c-3]&&s.splice(c-1,2);return this.drawPolygon(s)}},drawFilletRect:{value:function(t,a,r,o,n){if(0===n)return this.drawRect(t,a,r,o);var i=Math.min(r,o)/2,e=Math.min(i,Math.max(-i,n)),h=t+r,s=a+o,c=e<0?-e:0,u=Math.abs(e);return this.moveTo(t,a+u).arcTo(t+c,a+c,t+u,a,u).lineTo(h-u,a).arcTo(h-c,a+c,h,a+u,u).lineTo(h,s-u).arcTo(h-c,s-c,t+r-u,s,u).lineTo(t+u,s).arcTo(t+c,s-c,t,s-u,u).closePath()}},drawRegularPolygon:{value:function(t,a,r,o,n){void 0===n&&(n=0),o=Math.max(0|o,3);for(var i=-1*Math.PI/2+n,e=2*Math.PI/o,h=[],s=0;s<o;s++){var c=s*e+i;h.push(t+r*Math.cos(c),a+r*Math.sin(c))}return this.drawPolygon(h)}},drawRoundedPolygon:{value:function(t,a,r,o,n,i){if(void 0===i&&(i=0),o=Math.max(0|o,3),n<=0)return this.drawRegularPolygon(t,a,r,o,i);var e=r*Math.sin(Math.PI/o)-.001;n=Math.min(n,e);for(var h=-1*Math.PI/2+i,s=2*Math.PI/o,c=(o-2)*Math.PI/o/2,u=0;u<o;u++){var l=u*s+h,M=t+r*Math.cos(l),P=a+r*Math.sin(l),f=l+Math.PI+c,v=l-Math.PI-c,d=M+n*Math.cos(f),I=P+n*Math.sin(f),p=M+n*Math.cos(v),w=P+n*Math.sin(v);0===u?this.moveTo(d,I):this.lineTo(d,I),this.quadraticCurveTo(M,P,p,w)}return this.closePath()}},drawStar:{value:function(t,a,r,n,i,e){return void 0===e&&(e=0),this.drawPolygon(new o(t,a,r,n,i,e))}}})}(PIXI,PIXI);const objSafe=(proto,arg)=>{if(typeof(arg)!=="object"){return proto;};for(let v of Object.keys(arg)){proto[v]=arg[v];};return proto;};const kagura=function(){const kagura={Kagpi:class{constructor(options){options=objSafe({element:null,fps:30,width:null,height:null,StartScene:class extends kagura.Scene{constructor(){super()}},backgroundColor:"#000",autoFpsControl:true,autoViewSize:false,},options);this.options=options;let pixiArgs={view:options.element,width:options.width,height:options.height,backgroundColor:options.backgroundColor};this.app=new PIXI.Application(pixiArgs);this.app.renderer.resize(options.width,options.height);let StartScene=options.StartScene;this.scene=this.newClass(StartScene);if(options.autoViewSize){scaleToWindow(this.app.view);window.addEventListener("resize",()=>{scaleToWindow(this.app.view);});};if(options.autoFpsControl)this.fpsHistory=[];this.backgroundColor=options.backgroundColor;this.backFlameTime=new Date();};roop(){let deltaTime=(new Date().getTime()-this.backFlameTime.getTime());this.backFlameTime=new Date();this.sceneFlame++;this.scene.update({sceneFlame:this.sceneFlame,sceneTime:(new Date().getTime()-this.sceneStartTime.getTime())/1000,fps:1000/deltaTime,deltaTime:deltaTime,deltaFlame:deltaTime/(1000/this.options.fps)});if(this.scene.nextScene!==false){let app=this.app;this.app.stage.children=[];this.scene=this.newClass(this.scene.nextScene);};this.app.renderer.backgroundColor=this.scene.backgroundColor;let fps;if(this.options.autoFpsControl){this.fpsHistory.push(1000/deltaTime);if(this.fpsHistory.length===10)this.fpsHistory.shift();let aveFps=this.fpsHistory.reduce((acc,cur)=>acc+cur)/this.fpsHistory.length;fps=this.options.fps;fps*=(fps/aveFps);}else{fps=this.options.fps;};setTimeout(this.roop.bind(this),1000/fps);};newClass(Class){this.sceneFlame=0;this.sceneStartTime=new Date();Class.prototype.app=this.app;Class.prototype.width=this.app.renderer.width;Class.prototype.height=this.app.renderer.height;return new Class();};mainroop(){requestAnimationFrame(this.roop.bind(this));}},Scene:class{constructor(options){this.nextScene=false;this.stage=this.app.stage;this.renderer=this.app.renderer;};exit(nextScene){this.nextScene=nextScene;};update(args){};addChild(...arg){return this.app.stage.addChild(...arg);}},obj:{shape:{isNewTest:"",GraphicsProto:class extends PIXI.Graphics{constructor(options){super();options=objSafe({x:0,y:0,rotation:0,alpha:1,scale:{x:1,y:1}},options);this.x=options.x;this.y=options.y;this.rotation=options.rotation;this.alpha=options.alpha;this.scale=options.scale;};addChildTo(target){target.addChild(this);return this;}},},Group:class extends PIXI.Container{constructor(options){options=objSafe({x:0,y:0,rotation:0,alpha:1},options);super();this.x=options.x;this.y=options.y;this.rotation=options.rotation;this.alpha=options.alpha;};addChildTo(terget){terget.addChild(this);return this;};each(func){let deletes=[];this.children.forEach((elem,index)=>{const result=func.call(elem,elem,index);if(result===true){deletes.push(index)}});deletes.reverse().forEach(index=>this.children.splice(index,1));return this;}}},Boxer:class{constructor(options){for(let option of Object.keys(options)){this[option]=options[option];}}},FullScreen:function(){(document.body.webkitRequestFullscreen||document.body.requestFullscreen||document.body.mozRequestFullScreen)();},pixi:PIXI,};kagura.browser=function(userAgent){userAgent=userAgent.toLowerCase();if(userAgent.indexOf('msie')!=-1||userAgent.indexOf('trident')!=-1){return'ie';}else if(userAgent.indexOf('edge')!=-1){return'edge';}else if(userAgent.indexOf('chrome')!=-1){return'chrome';}else if(userAgent.indexOf('safari')!=-1){return'safari';}else if(userAgent.indexOf('firefox')!=-1){return'firefox';}else if(userAgent.indexOf('opera')!=-1){return'opera';}else{return'';}}(window.navigator.userAgent);kagura.obj.shape.GraphicsFill=class extends kagura.obj.shape.GraphicsProto{constructor(options){options=objSafe({fill:0xffffff},options);super(options);this.beginFill(options.fill);this.pivot.x=0;this.pivot.y=0;}};kagura.obj.shape.Circle=class extends kagura.obj.shape.GraphicsFill{constructor(options){options=objSafe({radius:10},options);super(options);this.drawCircle(0,0,options.radius).endFill();}};kagura.obj.shape.Ellipse=class extends kagura.obj.shape.GraphicsFill{constructor(options){options=objSafe({width:10,height:10},options);super(options);this.drawEllipse(0,0,options.width,options.height).endFill();}};kagura.obj.shape.Path=class extends kagura.obj.shape.GraphicsFill{constructor(options){options=objSafe({paths:[[100,0],[70,70],[0,100],[-70,70],[-100,0],[-70,-70],[0,-100],[70,-70]]},options);super(options);let paths=[];for(let path of options.paths){if(path.length===2&&Array.isArray(path)){paths.push(path[0],path[1]);}else{console.error("Paths's arguments type is array, and children array's length is 2.");return;}};this.drawPolygon(paths).endFill();}};kagura.obj.shape.Rect=class extends kagura.obj.shape.GraphicsFill{constructor(options){options=objSafe({width:100,height:100,fillet:0},options);super(options);this.drawFilletRect(0,0,options.width,options.height,options.fillet).endFill();}};kagura.obj.shape.Polygon=class extends kagura.obj.shape.GraphicsFill{constructor(options){options=objSafe({radius:10,sides:1,corner:1},options);super(options);this.drawRoundedPolygon(0,0,options.radius,options.sides,options.corner,0).endFill();}};kagura.obj.shape.Star=class extends kagura.obj.shape.GraphicsFill{constructor(options){options=objSafe({points:5,radius:10,innerRadius:20},options);super(options);this.drawStar(0,0,options.points,options.radius,options.innerRadius,0).endFill();}};kagura.obj.shape.Torus=class extends kagura.obj.shape.GraphicsFill{constructor(options){options=objSafe({points:5,radius:10,innerRadius:0,outerRadius:Math.PI*2},options);super(options);this.drawTorus(0,0,options.innerRadius,options.outerRadius,options.startArc,options.endArc).endFill();}};kagura.obj.shape.Line=class extends kagura.obj.shape.GraphicsProto{constructor(options){options=objSafe({color:0xffffff,paths:[[0,0],[10,10]],size:1},options);super(options);this.lineStyle(options.size,options.color);let i=0;for(let path of options.paths){i++;if(path.length===2&&Array.isArray(path)){if(i===1){this.moveTo(...path);};this.lineTo(...path);}else{console.error("Paths's arguments type is array, and children array's length is 2.");return;}}}};kagura.Loader=class extends PIXI.Loader{constructor(loads,loaded){super();for(let load of Object.keys(loads)){this.add(load,loads[load]);};if(typeof(loaded)=="function"){this.load(loaded.bind(this));}};get(id){return this.resources[id];}};kagura.obj.Sprite=class extends kagura.pixi.Sprite{constructor(options){super();options=objSafe({texture:void(0),alpha:1,x:0,y:0,width:this.width,height:this.height,startX:0,startY:0,endX:this.width,endY:this.height},options);this.texture=options.texture;this.alpha=options.alpha;this.x=options.x;this.y=options.y;};addChildTo(target){target.addChild(this);return this;}};return kagura;}();